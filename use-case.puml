@startuml

:Player: as p

rectangle Tamagotchi {

    p --> (On Start App)
    
    package Menu {
        
        p --> (Edit Options)
        p --> (New Game)
        p --> (Load)
        p --> (Login Online)
        
        (Login Online) ..> (Authentification) : <<include>>
        (New Game) ..> (Choose Pet) : <<include>>
        (Load) ..> (Start Game) : <<include>>
        (Load) <.. (Login Online) : <<extend>> [if auth]
        (On Start App) <.. (Load) : <<extend>> [if save file]
        (On Start App) <.. (New Game) : <<extend>> [if no save file]
        (Choose Pet) <.. (Customize Pet) : <<extend>> [if player wants]
        (Choose Pet) ..> (Start Game) : <<include>>
        (Edit Options)
    }

    package Game {
    
        p --> (Change Room)
        p --> (Feed)
        p --> (Interact with Pet)
        p --> (Open Menu)
        
        (Change Room) ..> (Change player location) : <<include>>
        (Change Room) ..> (Load environment) : <<include>>
        (On State Change) ..> (Save) : <<include>>
        (Give) ..> (On State Change) : <<include>>
        (Cook) ..> (Give) : <<include>>
        (Fridge) ..> (Give) : <<include>>
        (Feed) <.. (Cook) : <<extend>>\n[if in kitchen]
        (Feed) <.. (Fridge) : <<extend>>\n[if in kitchen]
        (MiniGame) <.. (Sport) : <<extend>>\n[if outside]
        (Interact with Pet) ..> (On State Change) : <<include>>
        (Interact with Pet) ..> (MiniGame) : <<extend>>
    }
}

@enduml
